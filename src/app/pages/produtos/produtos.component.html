


<div class="flex flex-col gap-5">
  <div class="flex flex-col self-start m-10 ">
    <p class="text-[36px] font-bold text-yellow-500">
      Produtos
        </p>
        <hr class=" border-yellow-500 border-b-2 w-[200px]"/>
      
<div class="my-5 ">
  <p-button icon="pi pi-plus" label="Criar Produto" (onClick)="abrirProdModal()"></p-button>
</div>

<div class="mx-10">
  <p-table [value]="produtos"
[globalFilterFields]="['nomeproduto', 'descricao', 'preco', 'categoria']"
selectionMode="single"
[(selection)]="selectedProd"
[paginator]="true"
[rows]="5"
[rowsPerPageOptions]="[5, 10, 25, 50, 100]"
(onRowSelect)="prodInfo()">
<ng-template pTemplate="header">
  <tr>
    <th>Nome</th>
    <th>Descrição</th>
    <th>Preço</th>
    <th>Imagem</th>
    <th>Categoria</th>
  </tr>
  <tr>
    <th>
      <p-columnFilter type="text" field="nomeproduto"></p-columnFilter>
    </th>
    <th>
      <p-columnFilter type="text" field="descricao"></p-columnFilter>
    </th>
    <th>
      <p-columnFilter type="text" field="preco"></p-columnFilter>
    </th>
    <th>
      <p-columnFilter type="text" field="categoria"></p-columnFilter>
    </th>

  </tr>
</ng-template>
<ng-template pTemplate="body" let-produto>
  <tr [pSelectableRow]="produto">
    <td>{{ produto.nomeproduto }}</td>
    <td>{{ produto.descricao }}</td>
    <td>{{ produto.preco }}</td>
    <td><img [src]="'https://imgmod16.blob.core.windows.net/teste/' + produto.imagem" [alt]="produto.nomeproduto" width="100" class="shadow-4 w-[100px] h-[60px]" /></td>

    <td>{{ produto.categoria }}</td>
  </tr>
</ng-template>
</p-table>


<!--Criar-->
<p-dialog header="Header" [(visible)]="prodModal" [modal]="true"  [style]="{ width: '50vv'}">
  <ng-template pTemplate="header">
      <span class="text-xl font-bold">Criar Produto</span>
  </ng-template>
  <div class="flex flex-row justify-between">
<div class="flex flex-col justify-center gap-12 items-center mr-10">
  <input type="text" placeholder="Nome do Produto" [(ngModel)]="nomeproduto" [ngModelOptions]="{standalone: true}" pInputText />
  <input type="text" pInputText placeholder="Descrição do Produto" [(ngModel)]="descricao" [ngModelOptions]="{standalone: true}"/>
  <p-inputNumber placeholder="Preço" [(ngModel)]="preco" [ngModelOptions]="{standalone: true}"mode="currency" currency="EUR" locale="pt-PT"> </p-inputNumber>
  <input type="file" class="text-white border-2 rounded-md border-yellow-500 file:bg-yellow-500 file:border-yellow-500 file:text-black" (change)="onFileSelected($event)"/>
</div>
<p-listbox [options]="categorias" optionLabel="categoria" [style]="{'width':'15rem'}"
emptyMessage='Erro' (onClick)="id_categoria = $event.value.id_categoria"></p-listbox>
<img src="{{file}}">
</div>
  <ng-template pTemplate="footer">
      <div class="flex flex-row justify-center">
        <p-button icon="pi pi-check" class="" label="Criar" (onClick)="criarProd()" styleClass="mr-10"></p-button>
        <p-button icon="pi pi-times"   label="Cancelar" (onClick)="prodModal = false"></p-button>
      </div>
  </ng-template>
</p-dialog>


<!--Update-->
<p-dialog header="Header" [(visible)]="uProdModal" [modal]="true"  [style]="{ width: '50vv'}">
  <ng-template pTemplate="header">
      <span class="text-xl font-bold">Atualizar Cliente</span>
  </ng-template>
  <div class="flex flex-row justify-between" *ngIf="selectedProd">
<div class="flex flex-col justify-between gap-12 items-center mr-10">
  <input type="text" pInputText [(ngModel)]="this.selectedProd!.nomeproduto" [ngModelOptions]="{standalone: true}" />
  <input type="text" pInputText [(ngModel)]="this.selectedProd!.descricao" [ngModelOptions]="{standalone: true}" />
  <p-inputNumber type="text" [(ngModel)]="this.selectedProd!.preco" [ngModelOptions]="{standalone: true}" />
</div>
<p-listbox [options]="categorias" optionLabel="categoria" [(ngModel)]="selectedCategoria" [ngModelOptions]="{standalone: true}" [style]="{'width':'15rem'}"
emptyMessage='Erro' (onClick)="id_categoria = $event.value.id_categoria"></p-listbox>
  </div>
  <ng-template pTemplate="footer">
      <div class="flex flex-row justify-center">
        <p-button icon="pi pi-check" label="Atualizar"  ></p-button>
        <p-button icon="pi pi-times"  label="Cancelar" (onClick)="uProdModal = false"></p-button>
      </div>
  </ng-template>
</p-dialog>
</div>
</div>



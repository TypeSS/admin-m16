<div class="flex flex-col self-start m-10">
  <p class="text-[36px] font-bold text-yellow-500">Funcionários</p>
  <hr class="border-yellow-500 border-b-2 w-[200px]" />
</div>
<div>
  <div class="card m-5">
    <p-table
      [value]="funcionarios"
      [globalFilterFields]="[
        'nome',
        'email',
        'telefone',
        'morada',
        'codPostal'
      ]"
      selectionMode="single"
      [(selection)]="selectedFunc"
      [paginator]="true"
      [rows]="5"
      [rowsPerPageOptions]="[5, 10, 25, 50, 100]"
      (onRowSelect)="funcModal = true"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>Nome</th>
          <th>Email</th>
          <th>Telefone</th>
          <th>Morada</th>
          <th>Código Postal</th>
          <th>Cargo</th>
        </tr>
        <tr>
          <th>
            <p-columnFilter type="text" field="nomefunc"></p-columnFilter>
          </th>
          <th>
            <p-columnFilter type="text" field="email"></p-columnFilter>
          </th>
          <th>
            <p-columnFilter type="text" field="telefone"></p-columnFilter>
          </th>
          <th>
            <p-columnFilter type="text" field="morada"></p-columnFilter>
          </th>
          <th>
            <p-columnFilter type="text" field="codPostal"></p-columnFilter>
          </th>
          <th>
            <p-columnFilter type="text" field="cargo"></p-columnFilter>
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-func>
        <tr [pSelectableRow]="func">
          <td>{{ func.nomefunc }}</td>
          <td>{{ func.email }}</td>
          <td>{{ func.telefone }}</td>
          <td>{{ func.morada }}</td>
          <td>{{ func.codPostal }}</td>
          <td>{{ func.cargo }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>


  <p-dialog
    header="Header"
    [(visible)]="funcModal"
    [modal]="true"
    [style]="{ width: '50vv' }"
  >
    <ng-template pTemplate="header">
      <span class="text-xl font-bold">Atualizar Funcionário</span>
    </ng-template>
      <div
        class="flex flex-col justify-center gap-12 items-center "
        *ngIf="selectedFunc"
      >
        <div class="flex flex-row justify-between gap-12 items-center mr-10">
        <input
        type="text"
        pInputText
        [(ngModel)]="this.selectedFunc!.nomefunc"
        [ngModelOptions]="{ standalone: true }"
      />
      <input
        type="text"
        pInputText
        [(ngModel)]="this.selectedFunc!.email"
        [ngModelOptions]="{ standalone: true }"
      />
      <p-inputNumber
        type="text"
        [(ngModel)]="this.selectedFunc!.telefone"
        [ngModelOptions]="{ standalone: true }"
      />
       </div>
       <div class="flex flex-row justify-between gap-12 items-center mr-10">
        <input
        type="text"
        pInputText
        [(ngModel)]="this.selectedFunc!.morada"
        [ngModelOptions]="{ standalone: true }"
      />
      <input
        type="text"
        pInputText
        [(ngModel)]="this.selectedFunc!.codPostal"
        [ngModelOptions]="{ standalone: true }"
      />
       </div>
      </div>
    <ng-template pTemplate="footer">
      <div class="flex flex-row justify-center">
        <p-button
          icon="pi pi-check"
          label="Atualizar"
          (onClick)="updateFunc()"
        ></p-button>
        <p-button
          icon="pi pi-trash"
          label="Apagar"
          (onClick)="deleteFunc()"
        ></p-button>
        <p-button
          icon="pi pi-times"
          label="Cancelar"
          (onClick)="funcModal = false"
        ></p-button>
      </div>
    </ng-template>
  </p-dialog>
</div>
